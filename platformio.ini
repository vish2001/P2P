; =============================================================================
; PEER-TO-PEER UWB RANGING SYSTEM
; PlatformIO Configuration
; =============================================================================
; 
; To flash different nodes, change TAG_ID in peer_config.h before building.
; Alternatively, use build flags to override at compile time.
;
; Example build commands:
;   pio run -e node1 -t upload    # Flash node 1
;   pio run -e node2 -t upload    # Flash node 2
;   etc.
; =============================================================================

[platformio]
default_envs = node1

[env]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 921600
upload_speed = 921600

; Common build flags
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DARDUINO_USB_CDC_ON_BOOT=0
    -I include

; Common library dependencies
lib_deps = 

; =============================================================================
; NODE-SPECIFIC ENVIRONMENTS
; =============================================================================
; Each node gets a different TAG_ID defined at compile time.
; This overrides the default TAG_ID in peer_config.h

[env:node1]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=1

[env:node2]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=2

[env:node3]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=3

[env:node4]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=4

[env:node5]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=5

[env:node6]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=6

[env:node7]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=7

[env:node8]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=8

; =============================================================================
; DEBUG ENVIRONMENT
; =============================================================================
[env:debug]
build_flags = 
    ${env.build_flags}
    -DTAG_ID=99
    -DDEBUG_OUTPUT=1
build_type = debug